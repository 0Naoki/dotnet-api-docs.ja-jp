<Namespace Name="System.Xml">
  <Docs>
    <summary><span data-ttu-id="3ff0d-101"><see cref="N:System.Xml" /> 名前空間は、XML を処理するための標準ベースのサポートを提供します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-101">The <see cref="N:System.Xml" /> namespace provides standards-based support for processing XML.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
  
<a name="std"></a>   
## <a name="supported-standards"></a><span data-ttu-id="3ff0d-102">サポートされている標準</span><span class="sxs-lookup"><span data-stu-id="3ff0d-102">Supported standards</span></span>  
 <span data-ttu-id="3ff0d-103"><xref:System.Xml>名前空間は、これらの標準をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-103">The <xref:System.Xml> namespace supports these standards:</span></span>  
  
-   <span data-ttu-id="3ff0d-104">XML 1.0 では、DTD のサポートを含む: [http://www.w3.org/TR/2006/REC-xml-20060816/](http://www.w3.org/TR/2006/REC-xml-20060816/)</span><span class="sxs-lookup"><span data-stu-id="3ff0d-104">XML 1.0, including DTD support: [http://www.w3.org/TR/2006/REC-xml-20060816/](http://www.w3.org/TR/2006/REC-xml-20060816/)</span></span>  
  
-   <span data-ttu-id="3ff0d-105">XML 名前空間両方ストリーム レベルと DOM: [http://www.w3.org/TR/REC-xml-names/](http://www.w3.org/TR/REC-xml-names/)</span><span class="sxs-lookup"><span data-stu-id="3ff0d-105">XML namespaces, both stream-level and DOM: [http://www.w3.org/TR/REC-xml-names/](http://www.w3.org/TR/REC-xml-names/)</span></span>  
  
-   <span data-ttu-id="3ff0d-106">XML スキーマ: [http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)</span><span class="sxs-lookup"><span data-stu-id="3ff0d-106">XML schemas: [http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)</span></span>  
  
-   <span data-ttu-id="3ff0d-107">XPath 式。 [http://www.w3.org/TR/xpath](http://www.w3.org/TR/xpath)</span><span class="sxs-lookup"><span data-stu-id="3ff0d-107">XPath expressions: [http://www.w3.org/TR/xpath](http://www.w3.org/TR/xpath)</span></span>  
  
-   <span data-ttu-id="3ff0d-108">XSLT 変換: [http://www.w3.org/TR/xslt](http://www.w3.org/TR/xslt)</span><span class="sxs-lookup"><span data-stu-id="3ff0d-108">XSLT transformations: [http://www.w3.org/TR/xslt](http://www.w3.org/TR/xslt)</span></span>  
  
-   <span data-ttu-id="3ff0d-109">DOM Level 1 Core: [http://www.w3.org/TR/REC-DOM-Level-1/](http://www.w3.org/TR/REC-DOM-Level-1/)</span><span class="sxs-lookup"><span data-stu-id="3ff0d-109">DOM Level 1 Core: [http://www.w3.org/TR/REC-DOM-Level-1/](http://www.w3.org/TR/REC-DOM-Level-1/)</span></span>  
  
-   <span data-ttu-id="3ff0d-110">DOM Level 2 Core: [http://www.w3.org/TR/DOM-Level-2/](http://www.w3.org/TR/DOM-Level-2/)</span><span class="sxs-lookup"><span data-stu-id="3ff0d-110">DOM Level 2 Core: [http://www.w3.org/TR/DOM-Level-2/](http://www.w3.org/TR/DOM-Level-2/)</span></span>  
  
 <span data-ttu-id="3ff0d-111">セクションを参照して[と W3C 仕様の相違](#diff)W3C 勧告の XML クラスが異なる 2 つのケースにします。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-111">See the section [Differences from the W3C specs](#diff) for two cases in which the XML classes differ from the W3C recommendations.</span></span>  
  
<a name="related"></a>   
## <a name="related-namespaces"></a><span data-ttu-id="3ff0d-112">関連する名前空間</span><span class="sxs-lookup"><span data-stu-id="3ff0d-112">Related namespaces</span></span>  
 <span data-ttu-id="3ff0d-113">.NET Framework には、XML 関連の操作用の他の名前空間も用意されています。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-113">The .NET Framework also provides other namespaces for XML-related operations.</span></span> <span data-ttu-id="3ff0d-114">一覧、説明、およびリンクの場合は、次を参照してください。、 [System.Xml 名前空間](http://msdn.microsoft.com/library/gg145036.aspx)web ページ。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-114">For a list, descriptions, and links, see the [System.Xml Namespaces](http://msdn.microsoft.com/library/gg145036.aspx) webpage.</span></span>  
  
<a name="async"></a>   
## <a name="processing-xml-asynchronously"></a><span data-ttu-id="3ff0d-115">XML を非同期的に処理</span><span class="sxs-lookup"><span data-stu-id="3ff0d-115">Processing XML asynchronously</span></span>  
 <span data-ttu-id="3ff0d-116"><xref:System.Xml.XmlReader?displayProperty=nameWithType>と<xref:System.Xml.XmlWriter?displayProperty=nameWithType>クラスに基づく非同期メソッドの数に含まれる、します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-116">The <xref:System.Xml.XmlReader?displayProperty=nameWithType> and <xref:System.Xml.XmlWriter?displayProperty=nameWithType> classes include a number of asynchronous methods that are based on the .</span></span> <span data-ttu-id="3ff0d-117">これらのメソッドは、文字列の名前の末尾に"Async"で識別できます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-117">These methods can be identified by the string "Async" at the end of their names.</span></span> <span data-ttu-id="3ff0d-118">これらのメソッドに、同期コードに似た非同期コードを記述して、既存の同期コードを簡単に非同期コードに移行することができます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-118">With these methods, you can write asynchronous code that's similar to your synchronous code, and you can migrate your existing synchronous code to asynchronous code easily.</span></span>  
  
-   <span data-ttu-id="3ff0d-119">非同期のメソッドを使用して、アプリではかなりのネットワーク ストリームの待機時間が存在します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-119">Use the asynchronous methods in apps where there is significant network stream latency.</span></span> <span data-ttu-id="3ff0d-120">メモリ ストリームまたはローカル ファイル ストリームの読み取り/書き込み操作の非同期 Api を使用しないでください。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-120">Avoid using the asynchronous APIs for memory stream or local file stream read/write operations.</span></span> <span data-ttu-id="3ff0d-121">入力ストリーム<xref:System.Xml.XmlTextReader>、および<xref:System.Xml.XmlTextWriter>同様の非同期操作をサポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-121">The input stream, <xref:System.Xml.XmlTextReader>, and <xref:System.Xml.XmlTextWriter> should support asynchronous operations as well.</span></span> <span data-ttu-id="3ff0d-122">それ以外の場合、スレッドは I/O 操作がブロックされます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-122">Otherwise, threads will still be blocked by I/O operations.</span></span>  
  
-   <span data-ttu-id="3ff0d-123">お勧めしません、同期および非同期の関数呼び出しを混在させるを使用する忘れた可能性がありますので、`await`キーワードまたは非同期のいずれかが必要な同期 API を使用します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-123">We don't recommend mixing synchronous and asynchronous function calls, because you might forget to use the `await` keyword or use a synchronous API where an asynchronous one is necessary.</span></span>  
  
-   <span data-ttu-id="3ff0d-124">設定しないでください、<xref:System.Xml.XmlReaderSettings.Async%2A?displayProperty=nameWithType>または<xref:System.Xml.XmlWriterSettings.Async%2A?displayProperty=nameWithType>フラグを`true`非同期メソッドを使用しない場合。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-124">Do not set the <xref:System.Xml.XmlReaderSettings.Async%2A?displayProperty=nameWithType> or <xref:System.Xml.XmlWriterSettings.Async%2A?displayProperty=nameWithType> flag to `true` if you don't intend to use an asynchronous method.</span></span>  
  
-   <span data-ttu-id="3ff0d-125">指定するを忘れた場合、`await`キーワード、非同期メソッドを呼び出すと、結果は非確定的な: 予期した結果または例外が表示される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-125">If you forget to specify the `await` keyword when you call an asynchronous method, the results are non-deterministic: You might receive the result you expected or an exception.</span></span>  
  
-   <span data-ttu-id="3ff0d-126">ときに、<xref:System.Xml.XmlReader>オブジェクトが大きなテキスト ノードを読み取って、部分的なテキストの値のみをキャッシュし、取得するため、テキスト ノードを返す可能性があります、<xref:System.Xml.XmlReader.Value%2A?displayProperty=nameWithType>プロパティは、I/O 操作によってブロックされる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-126">When an <xref:System.Xml.XmlReader> object is reading a large text node, it might cache only a partial text value and return the text node, so retrieving the <xref:System.Xml.XmlReader.Value%2A?displayProperty=nameWithType> property might be blocked by an I/O operation.</span></span> <span data-ttu-id="3ff0d-127">使用して、<xref:System.Xml.XmlReader.GetValueAsync%2A>非同期モードで、テキスト値を取得または使用するメソッド、<xref:System.Xml.XmlReader.ReadValueChunkAsync%2A>チャンク単位で大規模なテキストを読み取るメソッドをブロックします。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-127">Use the <xref:System.Xml.XmlReader.GetValueAsync%2A> method to get the text value in asynchronous mode, or use the <xref:System.Xml.XmlReader.ReadValueChunkAsync%2A> method to read a large text block in chunks.</span></span>  
  
-   <span data-ttu-id="3ff0d-128">使用する場合、<xref:System.Xml.XmlWriter>オブジェクトを呼び出し、<xref:System.Xml.XmlWriter.FlushAsync%2A>メソッドを呼び出す前に<xref:System.Xml.XmlWriter.Close%2A>I/O 操作がブロックされないようにします。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-128">When you use an <xref:System.Xml.XmlWriter> object, call the <xref:System.Xml.XmlWriter.FlushAsync%2A> method before calling <xref:System.Xml.XmlWriter.Close%2A> to avoid blocking an I/O operation.</span></span>  
  
<a name="diff"></a>   
## <a name="differences-from-the-w3c-specs"></a><span data-ttu-id="3ff0d-129">W3C 仕様の違い</span><span class="sxs-lookup"><span data-stu-id="3ff0d-129">Differences from the W3C specs</span></span>  
 <span data-ttu-id="3ff0d-130">モデル グループのスキーマ コンポーネントに制約を含む 2 つの場合、<xref:System.Xml>名前空間は、W3C の推奨事項とは異なります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-130">In two cases that involve constraints on model group schema components, the <xref:System.Xml> namespace differs from the W3C recommendations.</span></span>  
  
 <span data-ttu-id="3ff0d-131">**要素の宣言での一貫性:**</span><span class="sxs-lookup"><span data-stu-id="3ff0d-131">**Consistency in element declarations:**</span></span>  
  
 <span data-ttu-id="3ff0d-132">場合によっては、代替グループを使用している場合に、<xref:System.Xml>実装には、「スキーマ コンポーネントの制約:: 要素宣言一貫性のある、」に記載されているを満たしていません、 [Group Schema Components」モデルに対する制約](http://go.microsoft.com/fwlink/?LinkId=137029)W3C の仕様のセクションです。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-132">In some cases, when substitution groups are used, the <xref:System.Xml> implementation does not satisfy the "Schema Component Constraint: Element Declarations Consistent," which is described in the [Constraints on Model Group Schema Components](http://go.microsoft.com/fwlink/?LinkId=137029) section of the W3C spec.</span></span>  
  
 <span data-ttu-id="3ff0d-133">たとえば、次のスキーマには、同じ名前を持つ要素が含まれていますが、同じコンテンツ モデルとの置換グループに異なる型を使用します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-133">For example, the following schema includes elements that have the same name but different types in the same content model, and substitution groups are used.</span></span> <span data-ttu-id="3ff0d-134">これは通常、エラーになりますが、<xref:System.Xml> では、このスキーマがエラーなしでコンパイルおよび検証されます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-134">This should cause an error, but <xref:System.Xml> compiles and validates the schema without errors.</span></span>  
  
```  
<?xml version="1.0" encoding="utf-8" ?>   
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">  
  
   <xs:element name="e1" type="t1"/>  
   <xs:complexType name="t1"/>  
  
   <xs:element name="e2" type="t2" substitutionGroup="e1"/>  
      <xs:complexType name="t2">  
         <xs:complexContent>  
            <xs:extension base="t1">  
         </xs:extension>  
      </xs:complexContent>  
   </xs:complexType>  
  
   <xs:complexType name="t3">  
      <xs:sequence>  
         <xs:element ref="e1"/>  
         <xs:element name="e2" type="xs:int"/>  
      </xs:sequence>  
   </xs:complexType>  
</xs:schema>  
```  
  
 <span data-ttu-id="3ff0d-135">このスキーマでは、型 `t3` に要素のシーケンスが含まれます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-135">In this schema, type `t3` contains a sequence of elements.</span></span> <span data-ttu-id="3ff0d-136">置換が実行されるため、シーケンスの要素 `e1` の参照は、`e1` 型の要素 `t1` または `e2` 型の要素 `t2` になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-136">Because of the substitution, the reference to element `e1` from the sequence can result either in element `e1` of type `t1` or in element `e2` of type `t2`.</span></span> <span data-ttu-id="3ff0d-137">後者の場合は 2 つのシーケンスになる`e2`要素、型のいずれかが`t2`され、他の型の`xs:int`します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-137">The latter case would result in a sequence of two `e2` elements, where one is of type `t2` and the other is of type `xs:int`.</span></span>  
  
 <span data-ttu-id="3ff0d-138">**一意のパーティクル属性:**</span><span class="sxs-lookup"><span data-stu-id="3ff0d-138">**Unique particle attribution:**</span></span>  
  
 <span data-ttu-id="3ff0d-139">次の条件下で、<xref:System.Xml>実装は、"スキーマ コンポーネントの制約:: 一意のパーティクル属性、」に記載されているを満たさない、 [Group Schema Components」モデルに対する制約](http://go.microsoft.com/fwlink/?LinkId=137029)W3C の仕様のセクションです。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-139">Under the following conditions, the <xref:System.Xml> implementation does not satisfy the "Schema Component Constraint: Unique Particle Attribution," which is described in the [Constraints on Model Group Schema Components](http://go.microsoft.com/fwlink/?LinkId=137029) section of the W3C spec.</span></span>  
  
-   <span data-ttu-id="3ff0d-140">グループ内の要素の 1 つが、別の要素を参照している。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-140">One of the elements in the group references another element.</span></span>  
  
-   <span data-ttu-id="3ff0d-141">参照されている要素が代替グループの head 要素である。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-141">The referenced element is a head element of a substitution group.</span></span>  
  
-   <span data-ttu-id="3ff0d-142">代替グループには、グループ内の要素のいずれかと同じ名前を持つ要素が含まれています。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-142">The substitution group contains an element that has the same name as one of the elements in the group.</span></span>  
  
-   <span data-ttu-id="3ff0d-143">代替グループの要素がない固定された、代替グループの head 要素と同じ名前を持つ要素を参照する要素の基数 (minOccurs < maxOccurs)。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-143">The cardinality of the element that references the substitution group head element and the element with the same name as a substitution group element is not fixed (minOccurs < maxOccurs).</span></span>  
  
-   <span data-ttu-id="3ff0d-144">代替グループを参照する要素の定義には、同じ名前の substitution グループ要素を持つ要素の定義が前に付きます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-144">The definition of the element that references the substitution group precedes the definition of the element with the same name as a substitution group element.</span></span>  
  
 <span data-ttu-id="3ff0d-145">たとえば、次のスキーマでは、コンテンツ モデルがあいまいであるためにコンパイル エラーが発生するはずですが、<xref:System.Xml> では、このスキーマがエラーなしでコンパイルされます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-145">For example, in the schema below the content model is ambiguous and should cause a compilation error, but <xref:System.Xml> compiles the schema without errors.</span></span>  
  
```  
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">  
  
  <xs:element name="e1" type="xs:int"/>  
  <xs:element name="e2" type="xs:int" substitutionGroup="e1"/>  
  
  <xs:complexType name="t3">  
    <xs:sequence>  
      <xs:element ref="e1" minOccurs="0" maxOccurs="1"/>  
      <xs:element name="e2" type="xs:int" minOccurs="0" maxOccurs="1"/>  
    </xs:sequence>  
  </xs:complexType>  
  
  <xs:element name="e3" type="t3"/>  
</xs:schema>  
```  
  
 <span data-ttu-id="3ff0d-146">上記のスキーマに対して次の XML を検証しようとすると場合、検証は、次のメッセージで失敗します。"要素 'e3' に無効な子要素 'e2'。"および<xref:System.Xml.Schema.XmlSchemaValidationException>例外がスローされます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-146">If you try to validate the following XML against the schema above, the validation will fail with the following message: "The element 'e3' has invalid child element 'e2'." and an <xref:System.Xml.Schema.XmlSchemaValidationException> exception will be thrown.</span></span>  
  
```  
<e3>  
  <e2>1</e2>  
  <e2>2</e2>  
</e3>  
```  
  
 <span data-ttu-id="3ff0d-147">この問題を回避するには、XSD ドキュメント内の要素の宣言を交換することができます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-147">To work around this problem, you can swap element declarations in the XSD document.</span></span> <span data-ttu-id="3ff0d-148">例:</span><span class="sxs-lookup"><span data-stu-id="3ff0d-148">For example:</span></span>  
  
```  
<xs:sequence>  
  <xs:element ref="e1" minOccurs="0" maxOccurs="1"/>  
  <xs:element name="e2" type="xs:int" minOccurs="0" maxOccurs="1"/>  
</xs:sequence>  
```  
  
 <span data-ttu-id="3ff0d-149">これを次のようにします。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-149">becomes this:</span></span>  
  
```  
<xs:sequence>  
  <xs:element name="e2" type="xs:int" minOccurs="0" maxOccurs="1"/>  
  <xs:element ref="e1" minOccurs="0" maxOccurs="1"/>  
</xs:sequence>  
```  
  
 <span data-ttu-id="3ff0d-150">同じような問題の別の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-150">Here's another example of the same issue:</span></span>  
  
```  
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">  
   <xs:element name="e1" type="xs:string"/>  
   <xs:element name="e2" type="xs:string" substitutionGroup="e1"/>  
  
   <xs:complexType name="t3">  
      <xs:sequence>  
         <xs:element ref="e1" minOccurs="0" maxOccurs="1"/>  
         <xs:element name="e2" type="xs:int" minOccurs="0" maxOccurs="1"/>  
      </xs:sequence>  
   </xs:complexType>  
   <xs:element name="e3" type="t3"/>  
</xs:schema>  
```  
  
 <span data-ttu-id="3ff0d-151">上記のスキーマに対して次の XML を検証しようとすると、検証は、次の例外で失敗します"未処理の例外: System.Xml.Schema.XmlSchemaValidationException: 'e2' el 要素は無効です - 値 'abc' が無効。データ型に従って 'http://www.w3.org/2001/XMLSchema:int'-'abc' 文字列が有効な Int32 値ではありません"。\\</span><span class="sxs-lookup"><span data-stu-id="3ff0d-151">If you try to validate the following XML against the schema above, the validation will fail with the following exception: "Unhandled Exception: System.Xml.Schema.XmlSchemaValidationException: The 'e2' el element is invalid - The value 'abc' is invalid according to its datatype 'http://www.w3.org/2001/XMLSchema:int' - The string 'abc' is not a valid Int32 value."\\</span></span>  
  
```  
<e3><e2>abc</e2></e3>  
```  
  
<a name="security"></a>   
## <a name="security-considerations"></a><span data-ttu-id="3ff0d-152">セキュリティの考慮事項</span><span class="sxs-lookup"><span data-stu-id="3ff0d-152">Security considerations</span></span>  
 <span data-ttu-id="3ff0d-153">型とメンバー、<xref:System.Xml>名前空間に依存します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-153">The types and members in the <xref:System.Xml> namespace rely on the .</span></span> <span data-ttu-id="3ff0d-154">次のセクションでは、XML テクノロジに固有のセキュリティの問題について説明します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-154">The following sections discuss security issues that are specific to XML technologies.</span></span> <span data-ttu-id="3ff0d-155">詳細については、特定のクラスとメンバーが示されているを参照してくださいを参照してください、 [XML のデベロッパー センター](http://go.microsoft.com/fwlink/?linkid=42458)の技術情報については、ダウンロード、ニュースグループ、および XML 開発者向けの他のリソース。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-155">For details, see the specific classes and members mentioned, and visit the [XML Developer Center](http://go.microsoft.com/fwlink/?linkid=42458) for technical information, downloads, newsgroups, and other resources for XML developers.</span></span>  
  
 <span data-ttu-id="3ff0d-156">なおを使用するときに、<xref:System.Xml>型およびメンバーを XML には、潜在的なプライバシーに影響のあるデータが含まれている場合、エンドユーザーのプライバシーを尊重するようにアプリを実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-156">Also note that when you use the <xref:System.Xml> types and members, if the XML contains data that has potential privacy implications, you need to implement your app in a way that respects your end users' privacy.</span></span>  
  
 <span data-ttu-id="3ff0d-157">**外部アクセス**</span><span class="sxs-lookup"><span data-stu-id="3ff0d-157">**External access**</span></span>  
  
 <span data-ttu-id="3ff0d-158">いくつかの XML テクノロジには、処理中に他のドキュメントを取得する機能があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-158">Several XML technologies have the ability to retrieve other documents during processing.</span></span> <span data-ttu-id="3ff0d-159">たとえば、解析中のドキュメントにドキュメント型定義 (DTD) が存在する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-159">For example, a document type definition (DTD) can reside in the document being parsed.</span></span> <span data-ttu-id="3ff0d-160">解析中のドキュメントによって参照されている外部ドキュメントにも、DTD が存在する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-160">The DTD can also live in an external document that is referenced by the document being parsed.</span></span> <span data-ttu-id="3ff0d-161">XML スキーマ定義言語 (XSD) および XSLT テクノロジにも、他のファイルから情報を取り込む機能があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-161">The XML Schema definition language (XSD) and XSLT technologies also have the ability to include information from other files.</span></span> <span data-ttu-id="3ff0d-162">これらの外部リソースには、いくつかのセキュリティに関する注意事項を表示できます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-162">These external resources can present some security concerns.</span></span> <span data-ttu-id="3ff0d-163">たとえば、アプリ信頼済みのサイトからのみファイルを取得して、ファイルが取得されたと悪意のあるデータが含まれていないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-163">For example, you'll want to ensure that your app retrieves files only from trusted sites, and that the file it retrieves doesn't contain malicious data.</span></span>  
  
 <span data-ttu-id="3ff0d-164"><xref:System.Xml.XmlUrlResolver>クラスは、XML ドキュメントを読み込むとエンティティ、Dtd またはスキーマなどの外部リソースを解決するには、インポートまたはインクルード ディレクティブを使用します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-164">The <xref:System.Xml.XmlUrlResolver> class is used to load XML documents and to resolve external resources such as entities, DTDs, or schemas, and import or include directives.</span></span>  
  
 <span data-ttu-id="3ff0d-165">このクラスをオーバーライドしを指定することができます、<xref:System.Xml.XmlResolver>を使用するオブジェクト。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-165">You can override this class and specify the <xref:System.Xml.XmlResolver> object to use.</span></span> <span data-ttu-id="3ff0d-166">制御対象外の (信頼できない) リソースを開く場合には、<xref:System.Xml.XmlSecureResolver> クラスを使用します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-166">Use the <xref:System.Xml.XmlSecureResolver> class if you need to open a resource that you do not control, or that is untrusted.</span></span> <span data-ttu-id="3ff0d-167"><xref:System.Xml.XmlSecureResolver> は <xref:System.Xml.XmlResolver> をラップしたもので、元の <xref:System.Xml.XmlResolver> がアクセスできるリソースを制限できます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-167">The <xref:System.Xml.XmlSecureResolver> wraps an <xref:System.Xml.XmlResolver> and allows you to restrict the resources that the underlying <xref:System.Xml.XmlResolver> has access to.</span></span>  
  
 <span data-ttu-id="3ff0d-168">**サービス拒否が起こる**</span><span class="sxs-lookup"><span data-stu-id="3ff0d-168">**Denial of service**</span></span>  
  
 <span data-ttu-id="3ff0d-169">次のシナリオは、サービス不能攻撃に対する脆弱性が低いと考えられます。これは、<xref:System.Xml> クラスによって、そのような攻撃に対する保護手段が提供されるためです。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-169">The following scenarios are considered to be less vulnerable to denial of service attacks because the <xref:System.Xml> classes provide a means of protection from such attacks.</span></span>  
  
-   <span data-ttu-id="3ff0d-170">テキスト XML データの解析。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-170">Parsing text XML data.</span></span>  
  
-   <span data-ttu-id="3ff0d-171">バイナリの XML データは、Microsoft SQL Server によって生成された場合は、バイナリの XML データを解析します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-171">Parsing binary XML data if the binary XML data was generated by Microsoft SQL Server.</span></span>  
  
-   <span data-ttu-id="3ff0d-172">データ ソースからファイル システム、ストリーム、<xref:System.IO.TextWriter>、または <xref:System.Text.StringBuilder> への XML ドキュメントおよびフラグメントの書き込み。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-172">Writing XML documents and fragments from data sources to the file system, streams, a <xref:System.IO.TextWriter>, or a <xref:System.Text.StringBuilder>.</span></span>  
  
-   <span data-ttu-id="3ff0d-173"><xref:System.Xml.XmlReader> オブジェクトを使用し、<xref:System.Xml.XmlReaderSettings.DtdProcessing%2A> が <xref:System.Xml.DtdProcessing.Prohibit> に設定されている場合のドキュメント オブジェクト モデル (DOM) オブジェクトへのドキュメントの読み込み。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-173">Loading documents into the Document Object Model (DOM) object if you are using an <xref:System.Xml.XmlReader> object and <xref:System.Xml.XmlReaderSettings.DtdProcessing%2A> set to <xref:System.Xml.DtdProcessing.Prohibit>.</span></span>  
  
-   <span data-ttu-id="3ff0d-174">DOM オブジェクトの移動。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-174">Navigating the DOM object.</span></span>  
  
 <span data-ttu-id="3ff0d-175">サービス不能攻撃の心配がある場合、または信頼できない環境を使用している場合、次のシナリオは推奨されません。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-175">The following scenarios are not recommended if you are concerned about denial of service attacks, or if you are working in an untrusted environment.</span></span>  
  
-   <span data-ttu-id="3ff0d-176">DTD 処理。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-176">DTD processing.</span></span>  
  
-   <span data-ttu-id="3ff0d-177">スキーマ処理。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-177">Schema processing.</span></span> <span data-ttu-id="3ff0d-178">これには、信頼されていないスキーマのスキーマ コレクションへの追加、信頼されていないスキーマのコンパイル、および信頼されていないスキーマを使用した検証が含まれます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-178">This includes adding an untrusted schema to the schema collection, compiling an untrusted schema, and validating by using an untrusted schema.</span></span>  
  
-   <span data-ttu-id="3ff0d-179">XSLT 処理。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-179">XSLT processing.</span></span>  
  
-   <span data-ttu-id="3ff0d-180">ユーザーから提供されたバイナリ XML データの任意のスリームの解析。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-180">Parsing any arbitrary stream of user supplied binary XML data.</span></span>  
  
-   <span data-ttu-id="3ff0d-181">クエリ、編集、ドキュメント間でのサブツリーの移動、DOM オブジェクトの保存などの DOM 操作。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-181">DOM operations such as querying, editing, moving sub-trees between documents, and saving DOM objects.</span></span>  
  
 <span data-ttu-id="3ff0d-182">サービス拒否攻撃を懸念される場合、または信頼されていないソースを扱う場合は、DTD 処理を有効にしないでください。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-182">If you are concerned about denial of service issues or if you are dealing with untrusted sources, do not enable DTD processing.</span></span> <span data-ttu-id="3ff0d-183">これは既定で無効に<xref:System.Xml.XmlReader>オブジェクトを<xref:System.Xml.XmlReader.Create%2A>メソッドを作成します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-183">This is disabled by default on <xref:System.Xml.XmlReader> objects that the <xref:System.Xml.XmlReader.Create%2A> method creates.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3ff0d-184"><xref:System.Xml.XmlTextReader> では、DTD 処理が既定で許可されます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-184">The <xref:System.Xml.XmlTextReader> allows DTD processing by default.</span></span> <span data-ttu-id="3ff0d-185"><xref:System.Xml.XmlTextReader.DtdProcessing%2A?displayProperty=nameWithType> プロパティを使用してこの機能を無効にします。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-185">Use the <xref:System.Xml.XmlTextReader.DtdProcessing%2A?displayProperty=nameWithType> property to disable this feature.</span></span>  
  
 <span data-ttu-id="3ff0d-186">使用することができます DTD 処理を有効にした場合、<xref:System.Xml.XmlSecureResolver>リソースを制限するクラスを<xref:System.Xml.XmlReader>にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-186">If you have DTD processing enabled, you can use the <xref:System.Xml.XmlSecureResolver> class to restrict the resources that the <xref:System.Xml.XmlReader> can access.</span></span> <span data-ttu-id="3ff0d-187">XML 処理に対するメモリと時間制限できるようにアプリを設計することもできます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-187">You can also design your app so that the XML processing is memory and time constrained.</span></span> <span data-ttu-id="3ff0d-188">たとえば、ASP.NET アプリケーションでタイムアウト制限を構成できます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-188">For example, you can configure timeout limits in your ASP.NET app.</span></span>  
  
 <span data-ttu-id="3ff0d-189">**処理の考慮事項**</span><span class="sxs-lookup"><span data-stu-id="3ff0d-189">**Processing considerations**</span></span>  
  
 <span data-ttu-id="3ff0d-190">XML ドキュメントには他のファイルへの参照を含めることが可能なため、XML ドキュメントの解析に必要な処理能力を確定することは困難です。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-190">Because XML documents can include references to other files, it is difficult to determine how much processing power is required to parse an XML document.</span></span> <span data-ttu-id="3ff0d-191">たとえば、XML ドキュメントには DTD を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-191">For example, XML documents can include a DTD.</span></span> <span data-ttu-id="3ff0d-192">DTD にネストされたエントリや複合コンテンツ モデルが含まれている場合、ドキュメントの解析に長い時間がかかることがあります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-192">If the DTD contains nested entities or complex content models, it could take an excessive amount of time to parse the document.</span></span>  
  
 <span data-ttu-id="3ff0d-193"><xref:System.Xml.XmlReader> を使用するときには、<xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A> プロパティを設定することで、解析可能なドキュメントのサイズを制限できます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-193">When using <xref:System.Xml.XmlReader>, you can limit the size of the document that can be parsed by setting the <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A> property.</span></span> <span data-ttu-id="3ff0d-194">エンティティの展開により生成される文字数を制限するには、<xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A> プロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-194">You can limit the number of characters that result from expanding entities by setting the <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A> property.</span></span> <span data-ttu-id="3ff0d-195">これらのプロパティの設定例については、該当するトピックを参照してください。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-195">See the appropriate reference topics for examples of setting these properties.</span></span>  
  
 <span data-ttu-id="3ff0d-196">XSD および XSLT テクノロジには、処理パフォーマンスに影響する可能性のある追加機能があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-196">The XSD and XSLT technologies have additional capabilities that can affect processing performance.</span></span> <span data-ttu-id="3ff0d-197">たとえば、比較的小さなドキュメントの評価時に大量の時間を必要とする XML スキーマを作成することが可能です。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-197">For example, it is possible to construct an XML schema that requires a substantial amount of time to process when evaluated over a relatively small document.</span></span> <span data-ttu-id="3ff0d-198">また、XSLT スタイル シート内にスクリプト ブロックを埋め込むことも可能です。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-198">It is also possible to embed script blocks within an XSLT style sheet.</span></span> <span data-ttu-id="3ff0d-199">どちらの場合は、アプリに潜在的なセキュリティ脅威をもたらします。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-199">Both cases pose a potential security threat to your app.</span></span>  
  
 <span data-ttu-id="3ff0d-200">アプリを作成するを使用する場合、<xref:System.Xml.Xsl.XslCompiledTransform>クラスで、次の項目とその関連事項に注意してください。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-200">When creating an app that uses the <xref:System.Xml.Xsl.XslCompiledTransform> class, you should be aware of the following items and their implications:</span></span>  
  
-   <span data-ttu-id="3ff0d-201">XSLT スクリプトは既定で無効になっています。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-201">XSLT scripting is disabled by default.</span></span> <span data-ttu-id="3ff0d-202">XSLT スクリプトは、スクリプトのサポートが必要であり、完全に信頼された環境で作業している場合のみ有効にします。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-202">XSLT scripting should be enabled only if you require script support and you are working in a fully trusted environment.</span></span>  
  
-   <span data-ttu-id="3ff0d-203">XSLT `document()` 関数は既定で無効になっています。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-203">The XSLT `document()` function is disabled by default.</span></span> <span data-ttu-id="3ff0d-204">`document()` 関数を有効にした場合は、<xref:System.Xml.XmlSecureResolver> オブジェクトを <xref:System.Xml.Xsl.XslCompiledTransform.Transform%2A> メソッドに渡すことによって、アクセス可能なリソースを制限してください。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-204">If you enable the `document()` function, restrict the resources that can be accessed by passing an <xref:System.Xml.XmlSecureResolver> object to the <xref:System.Xml.Xsl.XslCompiledTransform.Transform%2A> method.</span></span>  
  
-   <span data-ttu-id="3ff0d-205">拡張オブジェクトは既定で有効になっています。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-205">Extension objects are enabled by default.</span></span> <span data-ttu-id="3ff0d-206">拡張オブジェクトを含む <xref:System.Xml.Xsl.XsltArgumentList> オブジェクトが <xref:System.Xml.Xsl.XslCompiledTransform.Transform%2A> メソッドに渡されると、拡張オブジェクトは使用されます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-206">If an <xref:System.Xml.Xsl.XsltArgumentList> object that contains extension objects is passed to the <xref:System.Xml.Xsl.XslCompiledTransform.Transform%2A> method, the extension objects are used.</span></span>  
  
-   <span data-ttu-id="3ff0d-207">XSLT スタイル シートには、他のファイルへの参照や埋め込みのスクリプト ブロックを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-207">XSLT style sheets can include references to other files and embedded script blocks.</span></span> <span data-ttu-id="3ff0d-208">悪意のあるユーザーがこれを悪用して、コンピューターがリソース不足に陥るまでシステムに処理を行わせようとするデータやスタイル シートを提供する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-208">A malicious user can exploit this by supplying you with data or style sheets that, when executed, can cause your system to process until the computer runs low on resources.</span></span>  
  
-   <span data-ttu-id="3ff0d-209">混在信頼環境で実行されている XSLT アプリケーションは、スタイル シートのなりすましになります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-209">XSLT apps that run in a mixed trust environment can result in style sheet spoofing.</span></span> <span data-ttu-id="3ff0d-210">たとえば、悪意のあるユーザーは、有害なスタイル シートを含むオブジェクトを読み込み、それを <xref:System.Xml.Xsl.XslCompiledTransform.Transform%2A> メソッドを呼び出して変換を実行する別のユーザーに渡す可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-210">For example, a malicious user can load an object with a harmful style sheet and hand it off to another user who subsequently calls the <xref:System.Xml.Xsl.XslCompiledTransform.Transform%2A> method and executes the transformation.</span></span>  
  
 <span data-ttu-id="3ff0d-211">これらのセキュリティ上の問題は、スタイル シートが信頼されたソースからのものでない限り、スクリプトや `document()` 関数を有効にしないこと、および信頼されていないソースからの <xref:System.Xml.Xsl.XslCompiledTransform> オブジェクト、XSLT スタイル シート、または XML ソース データを受け入れないことによって軽減できます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-211">These security issues can be mitigated by not enabling scripting or the `document()` function unless the style sheet comes from a trusted source, and by not accepting <xref:System.Xml.Xsl.XslCompiledTransform> objects, XSLT style sheets, or XML source data from an untrusted source.</span></span>  
  
 <span data-ttu-id="3ff0d-212">**例外処理**</span><span class="sxs-lookup"><span data-stu-id="3ff0d-212">**Exception handling**</span></span>  
  
 <span data-ttu-id="3ff0d-213">下位レベルのコンポーネントによってスローされる例外は、アプリを公開しないようにするパスの情報を公開することができます。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-213">Exceptions thrown by lower level components can disclose path information that you do not want exposed to the app.</span></span> <span data-ttu-id="3ff0d-214">アプリは、例外をキャッチして適切に処理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3ff0d-214">Your apps must catch exceptions and process them appropriately.</span></span>  
  
 ]]></format>
    </remarks>
    <altmember cref="N:System.Xml.Xsl" />
    <altmember cref="N:System.Xml.Schema" />
    <altmember cref="N:System.Xml.Linq" />
  </Docs>
</Namespace>