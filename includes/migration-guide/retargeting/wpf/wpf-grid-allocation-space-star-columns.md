### <a name="wpf-grid-allocation-of-space-to-star-columns"></a>スター型列に、領域の割り当てを WPF グリッド

|   |   |
|---|---|
|説明|.NET Framework 4.7 以降では、WPF は、アルゴリズムに置き換えられますを<xref:System.Windows.Controls.Grid>を使用してスペースを割り当てる *-列です。 これに割り当てられている実際の幅が変更されます * のケースの数の列。<ul><li>ときに 1 つまたは複数 *-列もがある最小値または最大の幅をその列の割り当てを比例をオーバーライドします。 (最小の幅は MinWidth の明示的な宣言から、または列のコンテンツから取得した、暗黙の型の最小値から派生できます。 幅の最大値のみで明示的に定義できます、MaxWidth 宣言からです。)</li><li>ときに 1 つまたは複数 *-極端に大きな列を宣言 *-weight、10 を超える ^298 です。</li><li>ときに、* の重量は大幅に異なるため、浮動小数点が不安定になる (オーバーフロー、アンダー フロー、精度が失われる) が発生します。</li><li>レイアウトの丸めが有効で、ディスプレイの実効 DPI が十分に高い場合。</li></ul>最初の 2 つの場合、新しいアルゴリズムによって生成される幅は大きく異なる、古いアルゴリズムによって生成されることができます。最後の場合の違いはピクセルである最大で 1 つまたは 2 つ。新しいアルゴリズムには、古いアルゴリズム内に存在するいくつかのバグが修正されます。<ol><li>列への割り当ての合計は、グリッドの幅を超える可能性があります。 この問題は、比例配分が最小サイズ未満の列に領域を割り当てると発生します。 このアルゴリズムでは最小サイズが割り当てられるため、他の列に使用できる領域が減ります。 ある場合ありません *、列に割り当てる左、割り当ての合計になりますが大きすぎます。</li><li>割り当ての合計が、グリッドの幅未満になる可能性があります。 これは、デュアル 1 が比例配分の列に割り当てがなしで、最大サイズよりも大きい場合に発生する問題 *-、余裕期間を使用して左の列です。</li><li>2 つ * の列にない比例割り当てを受け取ることができます、* の重み。 これは問題 1、2 よりも軽度な問題です。*-column A、B、C に (この順序で) 割り当てると、B の比例配分共有はその最小値 (または最大値) に違反します。 前述のように、これによって列 C に使用できる領域が変わり、A よりも比例配分の割り当てが少なく (または多く) なります。</li><li>非常に大きな重み付けを割り当て列 (&gt; 10 ^298) すべてとして扱われますいました重み 10 ^298 です。 そのような列 (およびやや小さな重みの列) の比例配分の差は考慮されません。</li><li>Inifinte 重みを持つ列は正しく処理されません。 [実際には重みを無限大に設定することはできませんが、これは人為的な制限です。 割り当てコードは制限を処理しようとしますが、無効なジョブになります。]</li><li>オーバーフロー、アンダーフロー、精度の低下などの浮動小数点精度の問題を回避していますが、いくつかの軽微な問題があります。</li><li>十分に高い DPI でレイアウトの丸めの調整が不適切です。</li></ol>新しいアルゴリズムには、次の基準: A に一致する結果が生成されます。 割り当てられている実際の幅、*、列は、小さい最小幅よりも最大幅よりも大きい値ではありません。B. 各<em>ではない列には、最小値が割り当てられているか、最大の幅には、幅に比例してが割り当てられてその<em>-重み。2 つの列が幅 x で宣言されている場合は、正確に</em>と y</em>それぞれ、およびどちらの列は、その最小値または最大の幅を受信する場合、実際の幅 v と列に割り当てられている w で同じ比率: v/w = = x/y.C. 割り当てられた合計幅&quot;比例&quot;*-を制約付きの列に割り当て列が使用可能な領域に等しい (自動修正、および *-列の最小値または最大の幅を割り当てられている)。 たとえば、0 可能性があります、最小の幅の合計が、グリッドの availbable 幅を超える場合。D. これらすべてのステートメントを解釈するのには、&quot;理想的な&quot;レイアウトです。 レイアウトの丸めが有効な場合の実際の幅とは異なる最適な幅限り 1 ピクセルずつです。古いアルゴリズムでは、(A) を受け入れられますが、上記で説明したような場合にその他の条件を有効にできませんでした。すべての列と幅がこの記事の内容について言うを行と高さにも適用します。|
|提案される解決策|既定では、.NET Framework 4.7 以降の .NET Framework のバージョンを対象に対象とする .NET Framework 4.6.2 または以前のバージョンが古いアルゴリズムを参照して、アプリの中に、新しいアルゴリズムが表示されるアプリです。既定をオーバーライドするには、次の構成設定を使用します。<pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>値 'true' が古いアルゴリズムを選択し、'false' に、新しいアルゴリズムを選択します。|
|スコープ|マイナー|
|Version|4.7|
|型|再ターゲット中|

