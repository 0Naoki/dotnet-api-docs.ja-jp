### <a name="currentculture-is-not-preserved-across-wpf-dispatcher-operations"></a>WPF ディスパッチャー操作 CurrentCulture は維持されません。

|   |   |
|---|---|
|説明|以降、.NET Framework 4.6 では、変更<xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>または<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>内で行われた、<xref:System.Windows.Threading.Dispatcher?displayProperty=name>そのディスパッチャー操作の最後に失われます。 同様に、<xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>または<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>操作が反映されないときに操作が実行される、ディスパッチャーの外部で行われます。具体的に、つまり<xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>と<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>WPF UI コールバックと WPF アプリケーションの他のコードの間での変更をフローせず可能性があります。これは、変更されたため、<xref:System.Threading.ExecutionContext?displayProperty=name>原因となった<xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>と<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>.NET Framework 4.6 を対象とするアプリの実行コンテキストの先頭に格納されます。 WPF ディスパッチャー操作は、操作を開始するために使用された実行コンテキストを格納して、操作が完了したときに、以前のコンテキストを復元します。 <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> と <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> がそのコンテキストの一部になったため、ディスパッチャー操作内でそれらに加えられた変更は、操作の外部では保持されません。|
|提案される解決策|この変更によって影響を受けるアプリは、必要な格納することを回避する可能性があります<xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>または<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>フィールドおよびチェックインの (UI イベント コールバック ハンドラーを含む) のすべてのディスパッチャー操作ボディ内を正しい<xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>と<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>設定されます。 また、ExecutionContext を変更する基になるためこの WPF 変更では、.NET Framework 4.6 以降を対象とするアプリのみに影響、この区切りを回避する .NET Framework 4.6 を対象または後で操作することも .NET Framework 4.5.2.Apps を対象とします。次の互換性を設定してこの問題を回避が切り替わります。<pre><code>AppContext.SetSwitch(&quot;Switch.System.Globalization.NoAsyncCurrentCulture&quot;, true);&#13;&#10;</code></pre>この問題は、.NET Framework 4.6.2 での WPF によって修正されました。 .NET Frameworks 4.6、4.6.1 経由でも修正されました[KB 3139549](https://support.microsoft.com/kb/3139549)です。 .NET 4.6 以降を対象とするアプリケーションが、WPF アプリケーションで、右側の動作を自動的に表示します。 <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> / <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>) ディスパッチャー操作間で保持されます。|
|スコープ|マイナー|
|Version|4.6|
|型|再ターゲット中|

