### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a><span data-ttu-id="e61d1-101">CspParameters.ParentWindowHandle は、HWND 値ようになりましたが必要です。</span><span class="sxs-lookup"><span data-stu-id="e61d1-101">CspParameters.ParentWindowHandle now expects HWND value</span></span>

|   |   |
|---|---|
|<span data-ttu-id="e61d1-102">説明</span><span class="sxs-lookup"><span data-stu-id="e61d1-102">Details</span></span>|<span data-ttu-id="e61d1-103"><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> 、.NET Framework 2.0 で導入された値により、UI キーにアクセスするために必要になるように、親ウィンドウのハンドル値を登録するアプリケーション (入力を求める、暗証番号 (pin) などもダイアログに同意するもの) に指定されたウィンドウのモーダルの子として表示されます。以降、.NET Framework 4.7 を対象とするアプリでは、Windows フォーム アプリケーションを設定できます、<xref:System.Security.Cryptography.CspParameters.ParentWindowHandle>次のようにコードを持つプロパティ。</span><span class="sxs-lookup"><span data-stu-id="e61d1-103">The <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> value, introduced in .NET Framework 2.0, allows an application to register a parent window handle value such that any UI required to access the key (such as a PIN prompt or consent dialog) opens as a modal child to the specified window.Starting with apps that target the .NET Framework 4.7, a Windows Forms application can set the <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> property with code like the following:</span></span><pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="e61d1-104">.NET Framework の以前のバージョンである値が必要、<xref:System.IntPtr?displayProperty=name>メモリ内の位置を表す場所、 [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND)存在していた値。</span><span class="sxs-lookup"><span data-stu-id="e61d1-104">In previous versions of the .NET Framework, the value was expected to be an <xref:System.IntPtr?displayProperty=name> representing a location in memory where the [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) value resided.</span></span> <span data-ttu-id="e61d1-105">プロパティをフォームに設定します。Windows 7 で処理し、以前のバージョンで、影響がなかったが Windows 8 およびそれ以降のバージョンでは、その結果、 &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: パラメーターが正しくありません。&quot;</span><span class="sxs-lookup"><span data-stu-id="e61d1-105">Setting the property to form.Handle on Windows 7 and earlier versions had no effect, but on Windows 8 and later versions, it results in a &quot;<xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: The parameter is incorrect.&quot;</span></span>|
|<span data-ttu-id="e61d1-106">提案される解決策</span><span class="sxs-lookup"><span data-stu-id="e61d1-106">Suggestion</span></span>|<span data-ttu-id="e61d1-107">.NET 4.7 を対象とする、または以降、親ウィンドウとの関係を登録したいアプリケーションを簡略化された形式を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="e61d1-107">Applications targeting .NET 4.7 or higher wishing to register a parent window relationship are encouraged to use the simplified form:</span></span><pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="e61d1-108">ユーザーに渡す正しい値が値を保持するメモリ位置のアドレスが確認できている<code>form.Handle</code>の選択を解除動作の変更、AppContext スイッチを設定して<code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code>に<code>true</code>です。</span><span class="sxs-lookup"><span data-stu-id="e61d1-108">Users who had identified that the correct value to pass was the address of a memory location which held the value <code>form.Handle</code> can opt out of the behavior change by setting the AppContext switch <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> to <code>true</code>.</span></span><ol><li><span data-ttu-id="e61d1-109">プログラムによって設定 compat スイッチによって、AppContext 説明に従って[ここ](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span><span class="sxs-lookup"><span data-stu-id="e61d1-109">By programmatically setting compat switches on the AppContext, as explained [here](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span></span></li><li><span data-ttu-id="e61d1-110">app.config ファイルの <code>&lt;runtime&gt;</code> セクションに以下の行を追加する:</span><span class="sxs-lookup"><span data-stu-id="e61d1-110">By adding the following line to the <code>&lt;runtime&gt;</code> section of the app.config file:</span></span></li></ol><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="e61d1-111">逆に、下にある古いバージョンの .NET Framework アプリケーションのロードは、AppContext を設定できる場合に、.NET Framework 4.7 ランタイムで新しい動作を選択したいユーザーが切り替える<code>false</code>です。</span><span class="sxs-lookup"><span data-stu-id="e61d1-111">Conversely, users who wish to opt in to the new behavior on the .NET Framework 4.7 runtime when the application loads under older .NET Framework versions can set the AppContext switch to <code>false</code>.</span></span>|
|<span data-ttu-id="e61d1-112">スコープ</span><span class="sxs-lookup"><span data-stu-id="e61d1-112">Scope</span></span>|<span data-ttu-id="e61d1-113">マイナー</span><span class="sxs-lookup"><span data-stu-id="e61d1-113">Minor</span></span>|
|<span data-ttu-id="e61d1-114">Version</span><span class="sxs-lookup"><span data-stu-id="e61d1-114">Version</span></span>|<span data-ttu-id="e61d1-115">4.7</span><span class="sxs-lookup"><span data-stu-id="e61d1-115">4.7</span></span>|
|<span data-ttu-id="e61d1-116">型</span><span class="sxs-lookup"><span data-stu-id="e61d1-116">Type</span></span>|<span data-ttu-id="e61d1-117">再ターゲット中</span><span class="sxs-lookup"><span data-stu-id="e61d1-117">Retargeting</span></span>|
|<span data-ttu-id="e61d1-118">影響を受ける API</span><span class="sxs-lookup"><span data-stu-id="e61d1-118">Affected APIs</span></span>|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

