### <a name="sslstream-supports-tls-alerts"></a>SslStream は、TLS アラートをサポートしています

|   |   |
|---|---|
|説明|失敗の TLS ハンドシェイクの後に、<xref:System.IO.IOException?displayProperty=name>内部で<xref:System.ComponentModel.Win32Exception?displayProperty=name>最初の I/O の読み取り/書き込み操作によって例外がスローされます。 <xref:System.ComponentModel.Win32Exception.NativeErrorCode?displayProperty=name>のコードに、<xref:System.ComponentModel.Win32Exception?displayProperty=name>これを使用してリモート側の TLS アラートにマップすることができます[Schannel ドキュメント](https://msdn.microsoft.com/library/windows/desktop/dd721886%28v=vs.85%29.aspx)です。詳細については、次を参照してください[RFC 2246: 7.2.2 エラー アラート](https://tools.ietf.org/html/rfc2246#section-7.2.2).NET 4.6.2 および下の動作は、トランスポート チャネル (通常は TCP 接続) は、にタイムアウト書き込みまたは読み取り中に、その他のパーティが失敗した場合、。ハンドシェイクとすぐにその後、接続を拒否しました。|
|提案される解決策|呼び出すアプリケーション ネットワーク I/O Api のように<xref:System.IO.Stream.Read(System.Byte[],System.Int32,System.Int32)> / <xref:System.IO.Stream.Write(System.Byte[],System.Int32,System.Int32)>を処理する<xref:System.IO.IOException>または<xref:System.TimeoutException?displayProperty=name>です。既定の .NET 4.7 開始では、TLS アラート機能が有効にします。 .NET 4.0 の .NET 4.6.2 を対象とするアプリケーションの互換性を保持するために無効になっている機能が、.NET 4.7 または高いシステムで実行されています。次の構成 API は、有効または .NET 4.6 以降の .NET 4.7 または高い framework で実行されるアプリケーション、機能を無効に使用できます。<ul><li>プログラムから。</li></ul>まず、アプリケーションは ServicePointManager は 1 回だけ初期化するためにする必要があります。<pre><code class="language-C#">AppContext.SetSwitch(&quot;TestSwitch.LocalAppContext.DisableCaching&quot;, true);&#13;&#10;AppContext.SetSwitch(&quot;Switch.System.Net.DontEnableTlsAlerts&quot;, true); // Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2.&#13;&#10;</code></pre><ul><li>AppConfig:</li></ul><pre><code class="language-XML">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Net.DontEnableTlsAlerts=true&quot;/&gt;&#13;&#10;&lt;!-- Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2. --&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><ul><li>レジストリ キー (グローバルのコンピューター):</li></ul>.NET 4.6 - 4.6.2 で機能を有効にする 'false' に値を設定します。<pre><code>Key = HKLM\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\AppContext\Switch.System.Net.DontEnableTlsAlerts&#13;&#10;Type = String&#13;&#10;Value = &quot;true&quot;&#13;&#10;</code></pre>|
|スコープ|エッジ|
|Version|4.7|
|型|再ターゲット中|
|影響を受ける API|<ul><li><xref:System.Net.Security.SslStream?displayProperty=nameWithType></li><li><xref:System.Net.WebRequest?displayProperty=nameWithType></li><li><xref:System.Net.HttpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.FtpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.Mail.SmtpClient?displayProperty=nameWithType></li><li><xref:System.Net.Http?displayProperty=nameWithType></li></ul>|

